<!doctype html>
<html lang="en">
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-75PF56FM03"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-75PF56FM03');
    </script>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% load static %}

    <!-- Bootstrap CSS -->
    <link rel="shortcut icon" type="image/png" href='{% static "UncoverBooks/final_logo.png"%}'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <style>
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      grid-gap: 15px;
      align-items: start;
      }
    .card-img-top {
      margin-left:20%;
      width: 200px;
      height: 300px;
      object-fit: contain;
      object-position:center;
      }
     </style>
    <title>UncoverBooks!</title>
  </head>
   <body>
  {% load static %}
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="{% url 'Home Page' %}"><img src='{% static "UncoverBooks/final_logo.png" %}' alt="" width="30" height="24">
          UncoverBooks
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="{% url 'Home Page' %}">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'tracker' %}">Tracker</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'ContactUs' %}">Contact Us</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'aboutUs' %}">About Us</a>
          </li>
          </ul>

          <form class="d-flex justify-content-center" method="get" action='{% url "search" %}'>
            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" name="search" id="search" width="50">
            <button class="btn btn-outline-success me-2" type="submit">Search</button>
          </form>
          {% if user.is_authenticated %}
            <a class="text-secondary mx-1" href="{% url 'handelLogout' %}" id="navbarDarkDropdownMenuLink" style="text-decoration:none;">
                Welcome {{request.user}}
                </a>
  <!--          <ul class="navbar-nav"> class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false"-->
  <!--            <li class="nav-item dropdown">-->
  <!--              -->
  <!--          <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDarkDropdownMenuLink">-->
  <!--            <li><a class="dropdown-item" href="{% url 'handelLogout' %}">Logout</a></li>-->
  <!--          </ul>-->
  <!--        </li>-->
  <!--      </ul>-->
          {% else %}
          <a href="{% url 'login' %}"><button type="submit" class="btn btn-outline-secondary mx-2">Login</button></a>
          {% endif %}
        <a href="{% url 'cart' %}"><button type="button" class="btn btn-outline-secondary mx-2">
          Cart(<span id="cart-item">0</span>)
        </button></a>
      </div>
    </div>
</nav>
  <ul class="nav nav-pills nav-fill">
  <li class="nav-item">
    <a class="nav-link" href="fiction" style="color:black;">Fiction</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="novel" style="color:black;">Novel</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="narrative" style="color:black;">Narrative</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="nonfiction" style="color:black;">Non-fiction</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="mystery" style="color:black;">Mystery</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="poetry" style="color:black;">Poetry</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="horror" style="color:black;">Horror</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="romance" style="color:black;">Romance</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="humor" style="color:black;">Humor</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="fantasy" style="color:black;">Fantasy</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="crime" style="color:black;">Crime</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="textbook" style="color:black;">Textbook</a>
  </li>
</ul>
{% block body %} {% endblock %}
<footer class="page-footer font-small unique-color-dark  my-3">

  <div style="background-color: #282f3b;">
    <div class="container">
      <div class="row py-4 d-flex align-items-center">
        <div class="col-md-6 col-lg-5 text-center text-md-left mb-4 mb-md-0">
          <h6 class="mb-0"></h6>
        </div>
        <div class="col-md-6 col-lg-7 text-center text-md-right">
        <a class="fb-ic">
            <i class="fab fa-facebook-f white-text mr-4"> </i>
          </a>
          <a class="tw-ic">
            <i class="fab fa-twitter white-text mr-4"> </i>
          </a>
          <a class="gplus-ic">
            <i class="fab fa-google-plus-g white-text mr-4"> </i>
          </a>
          <a class="li-ic">
            <i class="fab fa-linkedin-in white-text mr-4"> </i>
          </a>
          <a class="ins-ic">
            <i class="fab fa-instagram white-text"> </i>
          </a>
        </div>
      </div>
    </div>
  </div>
  <div class="container text-center text-md-left mt-5">
    <div class="row mt-3">
      <div class="col-md-3 col-lg-4 col-xl-3 mx-auto mb-4">
        <h6 class="text-uppercase font-weight-bold">Uncover Books</h6>
        <hr class="deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto" style="width: 60px;">
        <p>This website is specially designed and managed to complete your crave for reading.</p>
      </div>
      <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mb-4">
        <h6 class="text-uppercase font-weight-bold">Social Media</h6>
        <hr class="deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto" style="width: 60px;">
        <p>
          <a href="#!" style="text-decoration:none;">Instagram</a>
        </p>
        <p>
          <a href="#!" style="text-decoration:none;">Facebook</a>
        </p>
        <p>
          <a href="#!" style="text-decoration:none;">twitter</a>
        </p>
        <p>
          <a href="#!" style="text-decoration:none;">LinkedIn</a>
        </p>
      </div>
      <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mb-4">
        <h6 class="text-uppercase font-weight-bold">Useful links</h6>
        <hr class="deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto" style="width: 60px;">
        <p>
          <a href="{% url 'ContactUs' %}" style="text-decoration:none;">Help</a>
        </p>
        <p>
          <a href="{% url 'signup' %}" style="text-decoration:none;">Sign Up</a>
        </p>
        <p>
          <a href="{% url 'login' %}" style="text-decoration:none;">Your Account</a>
        </p>
        <p>
          <a href="{% url 'tracker' %}" style="text-decoration:none;">Shipping tracker</a>
        </p>
      </div>
      <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4">

        <h6 class="text-uppercase font-weight-bold">Contact</h6>
        <hr class="deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto" style="width: 60px;">
        <p>
          <i class="fas fa-home mr-3"></i> Official Address</p>
        <p>
          <i class="fas fa-envelope mr-3"></i> info@example.com</p>
        <p>
          <i class="fas fa-phone mr-3"></i> + 01 234 567 88</p>
        <p>
          <i class="fas fa-print mr-3"></i> + 01 234 567 89</p>

      </div>
    </div>
  </div>

</footer>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
  <!-- Option 2: Separate Popper and Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
<!--  <script type="text/javascript" src='{% static "UncoverBooks/working.js"%}'></script>-->
{% block js %}
<script>

if(localStorage.getItem('cart') == null)
{
   var cart = {};
}
else
{
   cart = JSON.parse(localStorage.getItem('cart'));
   updateCart(cart);
}
$('.divpr').on('click', 'button.cart', function()
{
   var idstr = this.id.toString();
   if(cart[idstr] != undefined)
   {
      qty = cart[idstr][0] + 1;
   }
   else
   {
      qty = 1;
        name = document.getElementById('name'+idstr).innerHTML
        price = document.getElementById('price'+idstr).innerHTML
        cart[idstr] = [qty, name, parseInt(price)];

   }
   console.log(cart);
   updateCart(cart);
});

function updateCart(cart)
{
  var sum = 0;
  for(var item in cart)
  {
    sum += cart[item][0];
    document.getElementById('div'+item).innerHTML="<button id='minus" + item + "' class='btn btn-primary minus'>-</button> <span id='val" + item + "''>" + cart[item][0] + "</span> <button id='plus" + item + "' class='btn btn-primary plus'> + </button>";
  }
  localStorage.setItem('cart', JSON.stringify(cart));
  document.getElementById('cart-item').innerHTML = sum;
}

$('.divpr').on("click", "button.minus", function() {
    a = this.id.slice(7, );
    cart['pr' + a][0] = cart['pr' + a][0] - 1;
    cart['pr' + a][0] = Math.max(0, cart['pr' + a][0]);
    document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];
    if (cart['pr' + a][0] == 0)
    {
      document.getElementById('divpr' + a).innerHTML = '<button id="pr'+a+'" class="btn btn-warning cart" style="width:100%">Add to Cart</button>';
      delete cart['pr' + a];
    }
    else
    {
      document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];
    }
    updateCart(cart);
});

$('.divpr').on("click", "button.plus", function() {
    a = this.id.slice(6, );
    cart['pr' + a][0] = cart['pr' + a][0] + 1;
    document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];
    updateCart(cart);
});

function clearCart()
{
   cart = JSON.parse(localStorage.getItem('cart'));
   localStorage.clear();
   cart = {};
   updateCart(cart);
}

</script>
{% endblock %}